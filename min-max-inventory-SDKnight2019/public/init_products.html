<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Init Products</title>
</head>
<body>
  <h2>Products Added:</h2>
  <div id="output"></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAY-uNAbb3INTLuyX7GNgcX_lx-hSLGM2o",
      authDomain: "min-max-inventory-sdknight2019.firebaseapp.com",
      projectId: "min-max-inventory-sdknight2019",
      storageBucket: "min-max-inventory-sdknight2019.firebasestorage.app",
      messagingSenderId: "462662087990",
      appId: "1:462662087990:web:81c7c5b87a7645251c2f97"
    };

    window.addEventListener('DOMContentLoaded', async () => {
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      const outputDiv = document.getElementById("output");

      const supplierIds = [
        "82b21Ljme7Nu8WiFv2cI",
        "F6scDW1qI8P5fiC5LQhq",
        "mtqzBlVUvu17A3BAsOZP",
        "o0qG5J6aKvIHyKkzh5tA",
        "sqN3Z8Z3MAP7IqGcmYFr"
      ];

      const products = [
        "Rose Radiance Blush",
        "Velvet Matte Lipstick",
        "Glow Up Highlighter",
        "HydraSkin Foundation",
        "CloudTouch Setting Spray",
        "Brow Boss Pencil",
        "Magic Wand Mascara",
        "Smooth Finish Primer",
        "UltraSheen Lip Gloss",
        "DreamSkin Moisturizer",
        "Perfect Pout Lip Liner",
        "Coconut Glow Body Oil",
        "Charcoal Detox Mask",
        "Aloe Fresh Toner",
        "Nude Neutral Palette",
        "Deep Clean Face Wash",
        "Berry Kiss Tint",
        "Golden Hour Bronzer",
        "Soft Silk Makeup Remover",
        "Matte Control Powder"
      ];

      for (let i = 0; i < products.length; i++) {
        const min = 10 + Math.floor(Math.random() * 5); // 10–14
        const max = min + 10 + Math.floor(Math.random() * 10); // 20–29

        let quantity;
        do {
          quantity = min + Math.floor(Math.random() * (max - min));
        } while (quantity <= min || quantity >= max);

        const product = {
          product_name: products[i],
          minimum_quantity: min,
          quantity: quantity,
          maximum_quantity: max,
          supplier_id: supplierIds[i % supplierIds.length]
        };

        try {
          const docRef = await addDoc(collection(db, "products"), product);
          const p = document.createElement("p");
          p.textContent = `✅ Added "${product.product_name}" with ID: ${docRef.id}`;
          outputDiv.appendChild(p);
        } catch (e) {
          console.error("❌ Error adding product:", e);
          const p = document.createElement("p");
          p.textContent = `❌ Failed to add "${product.product_name}": ${e.message}`;
          outputDiv.appendChild(p);
        }
      }
    });
  </script>
</body>
</html>
